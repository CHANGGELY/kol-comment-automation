<!-- 文件说明：中文文档，详细介绍架构、安装与使用，供学习与开发参考 -->

# KOL 评论区引流器（中文文档）

## 项目定位
- 在 YouTube / B 站 / 抖音 等平台执行“类人化”的评论操作与视觉自动化监控。
- 面向工程落地：追求稳定、可维护与可扩展。

## 架构概览
- 服务层（`services`）：封装业务流程，如打开视频、滚动、定位评论框、输入与提交。
- 行为内核（`ActionKernel`）：统一“拟人化交互”能力，如随机停顿、平滑滚动、渐进式输入。
- 视觉核心（`vision_core`）：OCR 预处理、文本识别与屏幕捕获。
- 验证码模块（`captcha_solver`）：检测与解决常见验证码（滑块等）。
- 选择器管理（`selector_manager`）：版本化与历史记录，支持平台变更自动回退。

## 安装与运行
- 安装依赖：`pip install -r 评论区引流器/-2/requirements.txt`
- 安装浏览器：`python -m playwright install`
- 环境变量：在 `评论区引流器/-2/.env` 配置 `ENABLE_HEADLESS`、`PROXY_SERVER` 等。
- 运行示例：`python 评论区引流器/-2/e2e/smoke_comment.py`

## 开发规范
- 代码可读性优先、卫语句处理错误、不吞异常。
- 使用结构化日志与性能打点，避免日志中泄露敏感信息。
- 提交前运行 `pre-commit` 保持统一风格。

## 测试与质量
- 单元测试框架：`pytest`，异步测试：`pytest-asyncio`。
- 目标覆盖率：>80%，CI 集成覆盖率上传至 Codecov。

## 常见问题
- OCR 初始化失败：自动从 GPU 降级到 CPU；需确保显卡驱动与依赖可用。
- 选择器定位失败：触发校验与回退，检查 `selectors.json` 的版本与备选。
- 代理与无头模式：通过 `.env` 配置，注意网络质量对自动化稳定性的影响。

## 贡献
- 欢迎提交 Issue/PR，遵循现有目录与命名规范，优先用向量化与简洁实现。
